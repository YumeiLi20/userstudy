ggvis(~FF) %>%
layer_histograms(width = input_slider(min = 1,
max = 100,
value = 50),  opacity = 0.8)
fname_starred
fname_starred %>%
ggvis(~FF) %>%
layer_histograms(width = input_slider(min = 1,
max = 100,
value = 50))
fname_starred %>%
ggplot(aes(FF)) + geom_histogram(binwidth = 10,  alpha = 0.8)
lname_freq %>%
ggplot(aes(n)) + geom_histogram(binwidth = 10, aes(fill = src), alpha = 0.8)
ggthemr(custom)
fname_starred %>%
ggplot(aes(FF)) + geom_histogram(binwidth = 10,  alpha = 0.8)
?case_when
fname_starred <-
fname_starred %>%
mutate(rarity = as_factor(case_when(
FF == 1 ~ "Unique",
between(FF, 2, 5) ~ "Rare",
between(FF, 5, 10) ~ "Frequent",
FF>10 ~ "Common"
)))
library(forcats)
fname_starred <-
fname_starred %>%
mutate(rarity = as_factor(case_when(
FF == 1 ~ "Unique",
between(FF, 2, 5) ~ "Rare",
between(FF, 5, 10) ~ "Frequent",
FF>10 ~ "Common"
)))
fname_starred
lname_starred <-
lname_starred %>%
mutate(rarity = as_factor(case_when(
LF == 1 ~ "Unique",
between(LF, 2, 5) ~ "Rare",
between(LF, 5, 10) ~ "Frequent",
LF>10 ~ "Common"
)))
fname_starred %>%
ggplot(aes(FF)) + geom_histogram(binwidth = 10,  alpha = 0.8, aes(fill = rarity))
custom <- define_palette(
swatch = c("lightblue", "darkblue","orange","green","violet","indigo","pink"),
gradient = c(lower = "lightblue", upper = "darkblue")
)
custom <- define_palette(
swatch = c("lightblue", "darkblue","orange","green","violet","olive","pink"),
gradient = c(lower = "lightblue", upper = "darkblue")
)
custom <- define_palette(
swatch = c("lightblue", "darkblue","orange","green","violet","red","pink"),
gradient = c(lower = "lightblue", upper = "darkblue")
)
ggthemr(custom)
fname_freq %>%
ggplot(aes(n)) + geom_histogram(binwidth = 10, aes(fill = src), alpha = 0.8)
fname_starred %>%
ggplot(aes(FF)) + geom_histogram(binwidth = 10,  alpha = 0.8, aes(fill = rarity))
fname_starred <-
fname_starred %>%
mutate(rarity = rarity(FF))
rarity = function(frequency) {
frequency = as_tibble(freq = frequency)
frequency %>%
mutate(rarity = as_factor(case_when(
freq == 1 ~ "Unique",
between(freq, 2, 5) ~ "Rare",
between(freq, 5, 10) ~ "Frequent",
freq>10 ~ "Common"))) %>%
pull(rarity) %>%
return()
}
fname_starred <-
fname_starred %>%
mutate(rarity = rarity(FF))
rm(rarity())
rm(rarity)
calculate_rarity = function(frequency) {
frequency = as_tibble(freq = frequency)
frequency %>%
mutate(rarity = as_factor(case_when(
freq == 1 ~ "Unique",
between(freq, 2, 5) ~ "Rare",
between(freq, 5, 10) ~ "Frequent",
freq>10 ~ "Common"))) %>%
pull(rarity) %>%
return()
}
fname_starred <-
fname_starred %>%
mutate(rarity = calculate_rarity(FF))
calculate_rarity(FF)
calculate_rarity(fname_starred$FF)
calculate_rarity = function(frequency) {
frequency = tibble(freq = frequency)
frequency %>%
mutate(rarity = as_factor(case_when(
freq == 1 ~ "Unique",
between(freq, 2, 5) ~ "Rare",
between(freq, 5, 10) ~ "Frequent",
freq>10 ~ "Common"))) %>%
pull(rarity) %>%
return()
}
fname_starred <-
fname_starred %>%
mutate(rarity = calculate_rarity(FF))
fname_starred
lname_starred <-
lname_starred %>%
mutate(rarity = calculate_rarity(LF))
fname_freq <-
fname_freq %>%
mutate(rarity = calculate_rarity(FF))
lname_freq <-
lname_freq %>%
mutate(rarity = calculate_rarity(LF))
lname_freq
fname_freq <- read_csv("./fname_freq.csv") %>%
rename(FF = n)
lname_freq <- read_csv("./lname_freq.csv") %>%
rename(LF = n)
fname_freq <-
fname_freq %>%
mutate(rarity = calculate_rarity(FF))
lname_freq <-
lname_freq %>%
mutate(rarity = calculate_rarity(LF))
lname_freq
fname_freq %>%
ggplot(aes(n)) + geom_histogram(binwidth = 10, aes(fill = rarity), alpha = 0.8)
fname_freq %>%
ggplot(aes(n)) + geom_histogram(binwidth = 10, aes(fill = src), alpha = 0.8)
fname_freq
fname_freq %>%
ggplot(aes(n)) + geom_histogram(
)
library(tidyverse)
library(ggthemr)
library(ggvis)
library(forcats)
setwd("C:/Users/gurud/Google Drive/Research Assistantship/seq/Gurudev Ilangovan/Record Linkage/userstudy/pipeline/frequencies/")
fname_freq <- read_csv("./fname_freq.csv") %>%
rename(FF = n)
lname_freq <- read_csv("./lname_freq.csv") %>%
rename(LF = n)
starred_data_all <- read_csv("../data_output/all_starred_race.csv")
fname_starred <-
starred_data_all %>%
select(`First Name`,FF)
lname_starred <-
starred_data_all %>%
select(`Last Name`,LF)
custom <- define_palette(
swatch = c("lightblue", "darkblue","orange","green","violet","red","pink"),
gradient = c(lower = "lightblue", upper = "darkblue")
)
ggthemr(custom)
View(fname_freq)
fname_freq <-
fname_freq %>%
mutate(rarity = calculate_rarity(FF))
lname_freq <-
lname_freq %>%
mutate(rarity = calculate_rarity(LF))
fname_starred <-
fname_starred %>%
mutate(rarity = calculate_rarity(FF))
lname_starred <-
lname_starred %>%
mutate(rarity = calculate_rarity(LF))
fname_freq %>%
ggplot(aes(n)) + geom_histogram(binwidth = 10, aes(fill = src), alpha = 0.8)
fname_freq
fname_freq %>%
ggplot(aes(n))
fname_freq
fname_freq$rarity
fname_freq
fname_freq %>%
ggplot(aes(n))
fname_freq %>%
ggplot(aes(FF)) + geom_histogram(binwidth = 10, aes(fill = rarity), alpha = 0.8)
library(tidyverse)
library(ggthemr)
library(ggvis)
library(forcats)
setwd("C:/Users/gurud/Google Drive/Research Assistantship/seq/Gurudev Ilangovan/Record Linkage/userstudy/pipeline/frequencies/")
fname_freq <- read_csv("./fname_freq.csv")
lname_freq <- read_csv("./lname_freq.csv")
starred_data_all <- read_csv("../data_output/all_starred_race.csv")
fname_starred <-
starred_data_all %>%
select(`First Name`, n = FF)
lname_starred <-
starred_data_all %>%
select(`Last Name`, n = LF)
custom <- define_palette(
swatch = c("lightblue", "darkblue","orange","green","violet","red","pink"),
gradient = c(lower = "lightblue", upper = "darkblue")
)
ggthemr(custom)
calculate_rarity = function(frequency) {
frequency = tibble(freq = frequency)
frequency %>%
mutate(rarity = as_factor(case_when(
freq == 1 ~ "Unique",
between(freq, 2, 5) ~ "Rare",
between(freq, 5, 10) ~ "Frequent",
freq>10 ~ "Common"))) %>%
pull(rarity) %>%
return()
}
fname_freq <-
fname_freq %>%
mutate(Rarity = calculate_rarity(n))
lname_freq <-
lname_freq %>%
mutate(Rarity = calculate_rarity(n))
fname_starred <-
fname_starred %>%
mutate(Rarity = calculate_rarity(n))
lname_starred <-
lname_starred %>%
mutate(Rarity = calculate_rarity(n))
fname_freq %>%
ggplot(aes(n)) + geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.8)
calculate_rarity = function(frequency) {
frequency = tibble(freq = frequency)
frequency %>%
mutate(rarity = as_factor(case_when(
freq == 1 ~ "Unique",
between(freq, 2, 5) ~ "Rare",
between(freq, 5, 10) ~ "Frequent",
freq>10 ~ "Common")),
rarity = fct_relevel(rarity, "Unique", "Rare", "Common","Frequent")) %>%
pull(rarity) %>%
return()
}
fname_freq <-
fname_freq %>%
mutate(Rarity = calculate_rarity(n))
lname_freq <-
lname_freq %>%
mutate(Rarity = calculate_rarity(n))
fname_starred <-
fname_starred %>%
mutate(Rarity = calculate_rarity(n))
lname_starred <-
lname_starred %>%
mutate(Rarity = calculate_rarity(n))
fname_freq %>%
ggplot(aes(n)) + geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.8)
custom <- define_palette(
swatch = c("darkblue","darkred","darkgreen","violet","darkorange","",,"pink"),
gradient = c(lower = "lightblue", upper = "darkblue")
)
custom <- define_palette(
swatch = c("darkblue","darkred","darkgreen","violet","darkorange","pink"),
gradient = c(lower = "lightblue", upper = "darkblue")
)
ggthemr(custom)
fname_freq %>%
ggplot(aes(n)) + geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.8)
custom <- define_palette(
swatch = c("white","darkblue","darkred","darkgreen","violet","darkorange","pink"),
gradient = c(lower = "lightblue", upper = "darkblue")
)
ggthemr(custom)
fname_freq %>%
ggplot(aes(n)) + geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.8)
custom <- define_palette(
swatch = c("black","blue","darkred","darkgreen","violet","darkorange","pink"),
gradient = c(lower = "lightblue", upper = "darkblue")
)
ggthemr(custom)
fname_freq %>%
ggplot(aes(n)) + geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.8)
custom <- define_palette(
swatch = c("black","navyblue","darkred","darkgreen","violet","darkorange","pink"),
gradient = c(lower = "lightblue", upper = "darkblue")
)
ggthemr(custom)
fname_freq %>%
ggplot(aes(n)) + geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.8)
lname_freq %>%
ggplot(aes(n)) + geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.8)
?facet_grid
fname_freq %>%
ggplot(aes(n)) +
facet_grid(~src) +
geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.8)
fname_freq %>%
ggplot(aes(n)) +
facet_grid(.~src) +
geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.8)
fname_freq %>%
ggplot(aes(n)) +
facet_grid(src) +
geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.8)
fname_freq %>%
ggplot(aes(n)) +
facet_grid(~src) +
geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.8)
fname_freq %>%
mutate(src = ifelse(src == "B", "1703", "1304")) %>%
ggplot(aes(n)) +
facet_grid(~src) +
geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.8)
lname_freq %>%
mutate(src = ifelse(src == "B", "1703", "1304")) %>%
ggplot(aes(n)) +
facet_grid(~src) +
geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.8)
fname_starred %>%
ggplot(aes(FF)) + geom_histogram(binwidth = 10,  alpha = 0.8, aes(fill = Rarity))
fname_starred %>%
ggplot(aes(n)) + geom_histogram(binwidth = 10,  alpha = 0.8, aes(fill = Rarity))
lname_starred %>%
ggplot(aes(n)) + geom_histogram(binwidth = 10,  alpha = 0.8, aes(fill = Rarity))
fname_starred %>%
count(n)
custom <- define_palette(
swatch = c("black","navyblue","red","darkgreen","violet","darkorange","pink"),
gradient = c(lower = "lightblue", upper = "darkblue")
)
fname_freq %>%
mutate(src = ifelse(src == "B", "1703", "1304")) %>%
ggplot(aes(n)) +
facet_grid(~src) +
geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.8)
ggthemr(custom)
fname_freq %>%
mutate(src = ifelse(src == "B", "1703", "1304")) %>%
ggplot(aes(n)) +
facet_grid(~src) +
geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.8)
custom <- define_palette(
swatch = c("black","blue","red","green","grey","darkorange","pink"),
gradient = c(lower = "lightblue", upper = "darkblue")
)
ggthemr(custom)
fname_freq %>%
mutate(src = ifelse(src == "B", "1703", "1304")) %>%
ggplot(aes(n)) +
facet_grid(~src) +
geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.5)
fname_freq %>%
mutate(src = ifelse(src == "B", "1703", "1304")) %>%
ggplot(aes(n)) +
facet_grid(~src) +
geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.75)
custom <- define_palette(
swatch = c("black","blue","red","darkgreen","grey","darkorange","pink"),
gradient = c(lower = "lightblue", upper = "darkblue")
)
ggthemr(custom)
fname_freq %>%
mutate(src = ifelse(src == "B", "1703", "1304")) %>%
ggplot(aes(n)) +
facet_grid(~src) +
geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.75)
custom <- define_palette(
swatch = c("black","blue","red","darkgreen","darkgrey","darkorange","pink"),
gradient = c(lower = "lightblue", upper = "darkblue")
)
ggthemr(custom)
fname_freq %>%
mutate(src = ifelse(src == "B", "1703", "1304")) %>%
ggplot(aes(n)) +
facet_grid(~src) +
geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.75)
fname_freq
calculate_rarity = function(frequency) {
frequency = tibble(freq = frequency)
frequency %>%
mutate(rarity = as_factor(case_when(
freq == 1 ~ "Unique",
between(freq, 2, 5) ~ "Rare",
between(freq, 5, 10) ~ "Frequent",
freq>10 ~ "Common")),
rarity = fct_relevel(rarity, "Unique", "Rare","Frequent", "Common")) %>%
pull(rarity) %>%
return()
}
fname_freq <-
fname_freq %>%
mutate(Rarity = calculate_rarity(n))
lname_freq <-
lname_freq %>%
mutate(Rarity = calculate_rarity(n))
fname_starred <-
fname_starred %>%
mutate(Rarity = calculate_rarity(n))
lname_starred <-
lname_starred %>%
mutate(Rarity = calculate_rarity(n))
fname_freq %>%
mutate(src = ifelse(src == "B", "1703", "1304")) %>%
ggplot(aes(n)) +
facet_grid(~src) +
geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.75)
lname_freq %>%
mutate(src = ifelse(src == "B", "1703", "1304")) %>%
ggplot(aes(n)) +
facet_grid(~src) +
geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.8)
fname_starred %>%
ggplot(aes(n)) + geom_histogram(binwidth = 10,  alpha = 0.8, aes(fill = Rarity))
lname_starred %>%
ggplot(aes(n)) + geom_histogram(binwidth = 10,  alpha = 0.8, aes(fill = Rarity))
fname_freq %>%
count(Rarity) %>%
mutate(percent = n/sum(n))
fname_freq %>%
count(Rarity) %>%
mutate(percent = n/sum(n))
fname_freq %>%
count(Rarity)
fname_freq %>%
count(Rarity) %>%
mutate(percent = nn/sum(nn))
fname_freq %>%
count(Rarity) %>%
mutate(percent = nn*100/sum(nn))
fname_freq %>%
count(Rarity) %>%
mutate(percent = nn*100/sum(nn)) %>%
ggplot(aes(Rarity, percent)) +
geom_bar()
ggplot(fname_freq, aes(Rarity, percent)) +
geom_bar()
ggplot(fname_freq, aes(Rarity)) +
geom_bar()
calculate_rarity = function(frequency) {
frequency = tibble(freq = frequency)
frequency %>%
mutate(rarity = as_factor(case_when(
freq == 1 ~ "Unique",
between(freq, 2, 5) ~ "Rare",
between(freq, 5, 10) ~ "Common",
freq>10 ~ "Frequent")),
rarity = fct_relevel(rarity, "Unique", "Rare", "Common", "Frequent")) %>%
pull(rarity) %>%
return()
}
fname_freq %>%
mutate(src = ifelse(src == "B", "1703", "1304")) %>%
ggplot(aes(n)) +
facet_grid(~src) +
geom_histogram(binwidth = 10, aes(fill = Rarity), alpha = 0.75)
ggplot(fname_freq, aes(Rarity)) +
geom_bar()
ggplot(fname_freq, aes(Rarity)) +
geom_bar(stat = "percent")
?geom_bar
ggplot(fname_freq, aes(Rarity)) +
geom_bar(stat = "prop")
ggplot(fname_freq, aes(Rarity)) +
geom_bar(aes(y = (..count..)/sum(..count..)))
ggplot(fname_freq, aes(Rarity)) +
geom_bar(aes(y = (..count..)/sum(..count..))) +
ylab("Proportion")
ggplot(fname_freq, aes(Rarity), alpha = 0.5) +
geom_bar(aes(y = (..count..)/sum(..count..))) +
ylab("Proportion")
ggplot(fname_freq, aes(Rarity)) +
geom_bar(aes(y = (..count..)/sum(..count..)), alpha = 0.5) +
ylab("Proportion")
ggplot(fname_starred, aes(Rarity)) +
geom_bar(aes(y = (..count..)/sum(..count..)), alpha = 0.5) +
ylab("Proportion") + ggtitle("Starred First Name")
calculate_rarity = function(frequency) {
frequency = tibble(freq = frequency)
frequency %>%
mutate(rarity = as_factor(case_when(
freq == 1 ~ "Unique",
between(freq, 2, 5) ~ "Rare",
between(freq, 5, 10) ~ "Common",
freq>10 ~ "Frequent")),
rarity = fct_relevel(rarity, "Unique", "Rare", "Common", "Frequent")) %>%
pull(rarity) %>%
return()
}
fname_freq <-
fname_freq %>%
mutate(Rarity = calculate_rarity(n))
lname_freq <-
lname_freq %>%
mutate(Rarity = calculate_rarity(n))
fname_starred <-
fname_starred %>%
mutate(Rarity = calculate_rarity(n))
lname_starred <-
lname_starred %>%
mutate(Rarity = calculate_rarity(n))
ggplot(fname_starred, aes(Rarity)) +
geom_bar(aes(y = (..count..)/sum(..count..)), alpha = 0.5) +
ylab("Proportion") + ggtitle("Starred First Name")
ggplot(fname_freq, aes(Rarity)) +
geom_bar(aes(y = (..count..)/sum(..count..)), alpha = 0.5) +
ylab("Proportion") + ggtitle("Lookup First Name")
ggplot(fname_freq, aes(Rarity, fill = Rarity)) +
geom_bar(aes(y = (..count..)/sum(..count..)), alpha = 0.5) +
ylab("Proportion") + ggtitle("Lookup First Name")
fname_starred %>%
count(Rarity)
