<h1>Disclosure Mode</h1>
<div id="demographics">
<!--
  <br>
  <div id="age">
    <text id="ageLabel" fill="red">Age:</text>
    <input type="text" class="textfield" value="" id="ageText" size="3" maxlength="2" name="ageText" onkeypress="return isNumber(event)" />
    <div id="ageValidate" class="validate" style="font-size: 150%; left: 10px; float: left;"></div>
  </div>
  <br>
  <br>
  <div id="occupation">
    <text id="occupationLabel" fill="red">Occupation:</text>
    <div id="occupationValidate" class="validate" style="font-size: 150%; left: 10px; float: left;"></div>
    <br>
    <input type="text" class="textfield" value="" id="occupationText" size="50" maxlength="50" name="occupationText" />
  </div>
  <br>
  <div id="degree">
    <text id="degreeLabel" fill="red">Highest Degree Obtained: </text><br>
    <div id="degreeValidate" class="validate" style="font-size: 150%; left: 10px; float: left;"></div>
      <div id="degreeRadio" class="radio">
          <input type="radio" id="d1" name="degree" value="High School"><label for="d1">High School</label><br>
          <input type="radio" id="d2" name="degree" value="Bachelors"><label for="d2">Bachelors</label><br>
          <input type="radio" id="d3" name="degree" value="Masters"><label for="d3">Masters</label><br>
          <input type="radio" id="d4" name="degree" value="PhD"><label for="d4">PhD</label><br>
          <input type="radio" id="d5" name="degree" value="Other"><label for="d5">Other</label>
      </div>
  </div>
  <br>
  
  <div id="major">
    <text id="majorLabel" fill="red">Major/Degree specialization:</text>
    <div id="majorValidate" class="validate" style="font-size: 150%; left: 10px; float: left;"></div>
    <br>
    <input type="text" class="textfield" value="" id="majorText" size="50" maxlength="50" name="majorText" />
  </div>
  <br>
  -->
 <div id="mode">
 <p style="font-weight:bold">[Warning: do not refresh your web browser before the end of the user study. ]</p>

    <text id="taskMode" fill="red">Select a disclosure mode: </text>
    <div id="modeValidate" class="validate" style="font-size: 150%; left: 10px; float: left; color:red;"></div>
      <g id="modeRadio" class="radio">
          <input type="radio" id="d6" name="mode" value="Full" aria-label="Single radio One">
          <label for="d6">Full Disclosure</label><br>
          <input type="radio" id="d7" name="mode" value="Full_Partial" aria-label="Single radio One">
          <label for="d7">Full Disclosure For Different Cells</label><br>
          <input type="radio" id="d8" name="mode" value="Partial_Cell" aria-label="Single radio One">
          <label for="d8">Paritial Disclosure Reveal Cell On Click</label><br>
          <input type="radio" id="d9" name="mode" value="Partial_Row" aria-label="Single radio One">
          <label for="d9">Paritial Disclosure Reveal Row On Click</label><br>
          <input type="radio" id="d10" name="mode" value="Partial" aria-label="Single radio One">
          <label for="d10">Minimum Disclosure Non-clickable</label>

      </g>
  </div>


  <button id="submitComments" class="next-button" type="button">Next</button><br>
  <div id="validateMessage" class="validate" style="color:red;"></div>

<div id="mode1" style="display:none">In <text style="font-weight: bold">Full Disclosure</text> mode, all the cells are visible.</div>
<div id="mode2" style="display:none">In <text style="font-weight: bold">Full Disclosure For Different Cells</text> mode, only different cells in a pair are visible. Dash lines represent the identical text in the pair.</div>
<div id="mode3" style="display:none">In <text style="font-weight: bold">Paritial Disclosure Reveal Cell On Click</text> mode, only the minimum differences are visible at start. However, you can click on the cells which are partially visible, then the cells pair will be shown.</div>
<div id="mode4" style="display:none">In <text style="font-weight: bold">Paritial Disclosure Reveal Row On Click</text> mode, only the minimum differences are visible at start. However, you can click on the cells which are partially visible, then all the cells with differences in the pair will be shown.</div>
<div id="mode5" style="display:none">In <text style="font-weight: bold">Minimum Disclosure Non-clickable</text> mode, only the minimum differences in the pairs are shown.<br></div>


<br>
</div>

<style>
    #submitComments {
        position: relative;
        left: 50%;
        transform: translate(-50%, 0%);
    }
</style>

<script>

  //d3.select('#consent').remove();
  function isNumber(evt) {
    evt = (evt) ? evt : window.event;
    var charCode = (evt.which) ? evt.which : evt.keyCode;
    if (charCode > 31 && (charCode < 48 || charCode > 57)) {
        return false;
    }
    return true;
  }

(function() {
  var data = {};
  data.mode = "";
  experimentr.hideNext();

  experimentr.startTimer('background_info');
  /*
  var ageText = d3.select('#ageText');
  var occupationText = d3.select('#occupationText');
  var majorText = d3.select('#majorText');

  var degreeRadio = d3.select('#degreeRadio');

  d3.selectAll('input')
    .filter(function(d) { return this.name === 'degree' ? this : null; })
    .on('change', function() { data.degree = this.value; });
  */
  d3.selectAll('input')
    .filter(function(d) { return this.name === 'mode' ? this : null; })
    .on('change', function() { data.mode = this.value;
      d3.select('#modeValidate').text("");
      d3.select('#validateMessage').text("");     
      d3.select("#mode1").style("display",function(d){return data.mode=="Full" ? "block":"none";});
      d3.select("#mode2").style("display",function(d){return data.mode=="Full_Partial" ? "block":"none";});
      d3.select("#mode3").style("display",function(d){return data.mode=="Partial_Cell" ? "block":"none";});
      d3.select("#mode4").style("display",function(d){return data.mode=="Partial_Row" ? "block":"none";});
      d3.select("#mode5").style("display",function(d){return data.mode=="Partial" ? "block":"none";});
    //d3.select('#submitComments').attr('disabled', null);
  });

  function goToNext() {
    experimentr.endTimer('background_info');
    experimentr.addData(data);
    //experimentr.release();
    experimentr.next();
  }

  function validate() {
    /*
    data.age = ageText.property('value');
    data.major = majorText.property('value');
    data.occupation = occupationText.property('value');
    */

    var messageThing = d3.select('#validateMessage');
    var messageText = "";
    messageThing.html("");
    /*
    if (data.age) {
      d3.select('#ageValidate').text("");
    } else {
      d3.select('#ageValidate').text("* ");
      messageText += "<p>* Please provide your age.</p>"
    }

    if (data.major) {
      d3.select('#majorValidate').text("");
    } else {
      d3.select('#majorValidate').text("* ");
      messageText += "<p>* Please provide your major/degree specialization.</p>"
    }

    if (data.degree) {
      d3.select('#degreeValidate').text("");
    } else {
      d3.select('#degreeValidate').text("* ");
      messageText += "<p>* Please select your highest degree obtained.</p>"
    }

    if (data.occupation) {
      d3.select('#occupationValidate').text("");
    } else {
      d3.select('#occupationValidate').text("* ");
      messageText += "<p>* Please enter your occupation.</p>"
    }
    */

    if (data.mode!="") {
      d3.select('#modeValidate').text("");
    } else {
      d3.select('#modeValidate').text("* ");
      messageText += '<p style="color:red">* Please select a task mode.</p>';
    }

    //goToNext();
    if(data.mode!="") {
      goToNext();
    } else {
      messageThing.html(messageText);
    }
  }//end validate

  d3.select('#submitComments')
    .on('click', function () {
      validate();
    });
}());
</script>
