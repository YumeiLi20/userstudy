<strong>Background Questionnaire</strong>
<div id="demographics">
  <br>
  <div id="age">
    <text id="ageLabel" fill="red">Age:</text>
    <input type="text" class="textfield" value="" id="ageText" size="3" maxlength="2" name="ageText" onkeypress="return isNumber(event)" />
    <div id="ageValidate" class="validate" style="font-size: 150%; left: 10px; float: left;"></div>
  </div>
  <br>
  <br>
  <div id="occupation">
    <text id="occupationLabel" fill="red">Occupation:</text>
    <div id="occupationValidate" class="validate" style="font-size: 150%; left: 10px; float: left;"></div>
    <br>
    <input type="text" class="textfield" value="" id="occupationText" size="50" maxlength="50" name="occupationText" />
  </div>
  <br>
  <div id="degree">
    <text id="degreeLabel" fill="red">Highest Degree Obtained: </text>
    <div id="degreeValidate" class="validate" style="font-size: 150%; left: 10px; float: left;"></div>
      <div id="degreeRadio">
          <input type="radio" id="d1" name="degree" value="High School"> High School
          <input type="radio" id="d2" name="degree" value="Bachelors"> Bachelors
          <input type="radio" id="d3" name="degree" value="Masters"> Masters
          <input type="radio" id="d4" name="degree" value="PhD"> PhD
          <input type="radio" id="d5" name="degree" value="Other"> Other
      </div>
  </div>
  <br>
  <div id="major">
    <text id="majorLabel" fill="red">Major/Degree specialization:</text>
    <div id="majorValidate" class="validate" style="font-size: 150%; left: 10px; float: left;"></div>
    <br>
    <input type="text" class="textfield" value="" id="majorText" size="50" maxlength="50" name="majorText" />
  </div>
  <button id="submitComments" class="next-button" type="button">Next</button>
  <div id="validateMessage" class="validate"></div>
<br>
</div>

<style>
    #submitComments {
        position: relative;
        left: 50%;
        transform: translate(-50%, 0%);
    }
</style>

<script>

  //d3.select('#consent').remove();
  function isNumber(evt) {
    evt = (evt) ? evt : window.event;
    var charCode = (evt.which) ? evt.which : evt.keyCode;
    if (charCode > 31 && (charCode < 48 || charCode > 57)) {
        return false;
    }
    return true;
  }

(function() {
  var data = {};

  experimentr.hideNext();

  experimentr.startTimer('background_info');

  var ageText = d3.select('#ageText');
  var occupationText = d3.select('#occupationText');
  var majorText = d3.select('#majorText');

  var degreeRadio = d3.select('#degreeRadio');



  d3.selectAll('input')
    .filter(function(d) { return this.name === 'degree' ? this : null; })
    .on('change', function() { data.degree = this.value; });



  function goToNext() {
    experimentr.endTimer('background_info');
    experimentr.addData(data);
    //experimentr.release();
    experimentr.next();
  }

  function validate() {

    data.age = ageText.property('value');
    data.major = majorText.property('value');
    data.occupation = occupationText.property('value');


    var messageThing = d3.select('#validateMessage');
    var messageText = "";
    messageThing.html("");

    if (data.age) {
      d3.select('#ageValidate').text("");
    } else {
      d3.select('#ageValidate').text("* ");
      messageText += "<p>* Please provide your age.</p>"
    }

    if (data.major) {
      d3.select('#majorValidate').text("");
    } else {
      d3.select('#majorValidate').text("* ");
      messageText += "<p>* Please provide your major/degree specialization.</p>"
    }

    if (data.degree) {
      d3.select('#degreeValidate').text("");
    } else {
      d3.select('#degreeValidate').text("* ");
      messageText += "<p>* Please select your highest degree obtained.</p>"
    }

   

    if (data.occupation) {
      d3.select('#occupationValidate').text("");
    } else {
      d3.select('#occupationValidate').text("* ");
      messageText += "<p>* Please enter your occupation.</p>"
    }

    goToNext();
    //if(data.age && data.degree && data.major && data.occupation) {
      //d3.select('#submitComments').attr('disabled', null);
      //goToNext();
    //} else {
      //messageThing.html(messageText);
    //}
  }//end validate

  d3.select('#submitComments')
    .on('click', function () {
      validate();
    });
}());
</script>
